"use strict";(globalThis["webpackChunkpersonal"]=globalThis["webpackChunkpersonal"]||[]).push([[293],{7157:(e,t,s)=>{s.d(t,{Z:()=>M});var a=s(3673),r=s(8880),o=s(2323);const l={key:1,class:"no-history text-center q-mt-xl"},i=(0,a._)("div",{class:"text-h5 text-primary"},"No User",-1);function n(e,t,s,n,u,c){const d=(0,a.up)("q-skeleton"),m=(0,a.up)("q-badge"),p=(0,a.up)("q-avatar"),h=(0,a.up)("q-item-section"),f=(0,a.up)("q-item-label"),g=(0,a.up)("q-item"),w=(0,a.up)("q-icon"),y=(0,a.up)("q-tooltip"),b=(0,a.up)("q-btn"),v=(0,a.up)("q-list"),_=(0,a.up)("q-menu"),k=(0,a.up)("q-page"),q=(0,a.Q2)("ripple");return(0,a.wg)(),(0,a.j4)(k,{style:{"min-height":"unset"}},{default:(0,a.w5)((()=>[Object.keys(e.users).length||e.preloader?((0,a.wg)(),(0,a.j4)(v,{key:0,onMouseleave:t[0]||(t[0]=t=>e.userOnHover=null)},{default:(0,a.w5)((()=>[(0,a.Wm)(r.W3,{appear:"","enter-active-class":"animated bounceInLeft slow","leave-active-class":"animated bounceOutRight slow"},{default:(0,a.w5)((()=>[e.preloader?(0,a.wy)(((0,a.wg)(),(0,a.j4)(g,{key:0,clickable:""},{default:(0,a.w5)((()=>[(0,a.Wm)(h,{avatar:""},{default:(0,a.w5)((()=>[(0,a.Wm)(p,{round:"","text-color":"white",color:"grey-6"},{default:(0,a.w5)((()=>[(0,a.Wm)(d,{type:"QAvatar"}),(0,a.Wm)(m,{rounded:"",floating:"",align:"middle",class:"q-pa-none q-ma-none transparent",style:{bottom:"-3px",right:"-3px",top:"unset"}},{default:(0,a.w5)((()=>[(0,a.Wm)(d,{type:"QAvatar",size:"10px"})])),_:1})])),_:1})])),_:1}),(0,a.Wm)(h,null,{default:(0,a.w5)((()=>[(0,a.Wm)(f,null,{default:(0,a.w5)((()=>[(0,a.Wm)(d,{type:"text"})])),_:1})])),_:1})])),_:1})),[[q]]):((0,a.wg)(!0),(0,a.iD)(a.HY,{key:1},(0,a.Ko)(e.visibleUsers,((t,s)=>(0,a.wy)(((0,a.wg)(),(0,a.j4)(g,{clickable:"",key:s,onMouseover:t=>e.userOnHover=s,to:e.$myvar.router.chat.url+"/"+s},{default:(0,a.w5)((()=>[(0,a.Wm)(h,{avatar:""},{default:(0,a.w5)((()=>[(0,a.Wm)(p,{round:"","text-color":"white",color:"grey-6"},{default:(0,a.w5)((()=>[(0,a.Wm)(w,{name:"fas fa-mask"}),t.online&&!t.invisible||e.notifMessages[s]&&e.notifMessages[s].length?((0,a.wg)(),(0,a.j4)(m,{key:0,rounded:"",floating:"",align:"middle",class:"q-pa-none q-ma-none transparent",style:{bottom:"-3px",right:"-3px",top:"unset"}},{default:(0,a.w5)((()=>[(0,a.Wm)(w,{size:e.notifMessages[s]&&e.notifMessages[s].length?"10px":"13px",color:e.notifMessages[s]&&e.notifMessages[s].length?t.online&&!t.invisible?"white":"primary":"secondary",name:e.notifMessages[s]&&e.notifMessages[s].length?"add":"circle",class:(0,o.C_)(e.notifMessages[s]&&e.notifMessages[s].length?t.online&&!t.invisible?"bg-primary q-pa-xs":"bg-grey-4 q-pa-xs":"bg-white"),style:{"border-radius":"50%"}},null,8,["size","color","name","class"])])),_:2},1024)):(0,a.kq)("",!0)])),_:2},1024)])),_:2},1024),(0,a.Wm)(h,null,{default:(0,a.w5)((()=>[(0,a.Wm)(f,{class:(0,o.C_)(e.notifMessages[s]&&e.notifMessages[s].length?"text-weight-medium":"")},{default:(0,a.w5)((()=>[(0,a.Uk)((0,o.zw)(t.name),1)])),_:2},1032,["class"])])),_:2},1024),(0,a.Wm)(h,{side:""},{default:(0,a.w5)((()=>[e.userOnHover==s||e.otherUserId==s&&!e.userOnHover?((0,a.wg)(),(0,a.j4)(b,{key:0,round:"",ripple:"",size:"sm",color:"white",icon:"delete_sweep","text-color":"primary",onClick:(0,r.iM)((t=>e.clearChats(s)),["prevent"]),style:{background:"rgba(255, 255, 255, 0.5) !important"}},{default:(0,a.w5)((()=>[(0,a.Wm)(y,{delay:100,offset:[10,10],self:"center left",class:"bg-primary",anchor:"center right"},{default:(0,a.w5)((()=>[(0,a.Uk)(" Clear Chats ")])),_:1})])),_:2},1032,["onClick"])):(0,a.kq)("",!0)])),_:2},1024),e.$q.platform.is.mobile?((0,a.wg)(),(0,a.j4)(_,{key:0,"auto-close":"","context-menu":"","touch-position":""},{default:(0,a.w5)((()=>[(0,a.Wm)(v,null,{default:(0,a.w5)((()=>[(0,a.Wm)(g,{clickable:"",onClick:t=>e.clearChats(s)},{default:(0,a.w5)((()=>[(0,a.Wm)(h,{avatar:"",style:{"min-width":"35px"}},{default:(0,a.w5)((()=>[(0,a.Wm)(w,{name:"delete_sweep"})])),_:1}),(0,a.Wm)(h,null,{default:(0,a.w5)((()=>[(0,a.Uk)("Clear Chats")])),_:1})])),_:2},1032,["onClick"])])),_:2},1024)])),_:2},1024)):(0,a.kq)("",!0)])),_:2},1032,["onMouseover","to"])),[[q]]))),128))])),_:1})])),_:1})):((0,a.wg)(),(0,a.iD)("div",l,[(0,a.Wm)(w,{name:"no_accounts",size:"100px",color:"primary"}),i]))])),_:1})}var u=s(6386),c=s(3552),d=s(741);const m=(0,a.aZ)({name:"Users Page",mixins:[c.k0,c.aY],data(){return{userOnHover:null}},mounted(){this.startPreloading(this.visibleUsers)},computed:{...(0,d.Se)("firebase_auth",["users","visibleUsers"]),...(0,d.Se)("firebase_notification",["notifMessages"]),...(0,d.rn)("firebase_auth",["userDetails"])},methods:{...(0,d.nv)("firebase_chat",["firebaseClearChats"]),async clearChats(e){await this.firebaseClearChats(e).then((e=>{e.success?(0,u.qz)("Messages has been cleared.","positive",1e3,this.$q.screen.lt.sm?"top":"bottom-left",{color:"primary",textColor:"white"}):(0,u.qz)("Failed to delete messages.","warning",1e3,this.$q.screen.lt.sm?"top":"bottom-left",{color:"primary",textColor:"white"})})).catch((()=>{(0,u.qz)("Error deleting messages.","negative",1e3,this.$q.screen.lt.sm?"top":"bottom-left",{color:"primary",textColor:"white"})}))}}});var p=s(4260),h=s(4379),f=s(7011),g=s(3414),w=s(2035),y=s(5096),b=s(4103),v=s(9721),_=s(2350),k=s(4554),q=s(8240),x=s(8870),W=s(811),U=s(6489),D=s(7518),C=s.n(D);const Z=(0,p.Z)(m,[["render",n]]),M=Z;C()(m,"components",{QPage:h.Z,QList:f.Z,QItem:g.Z,QItemSection:w.Z,QAvatar:y.Z,QSkeleton:b.ZP,QBadge:v.Z,QItemLabel:_.Z,QIcon:k.Z,QBtn:q.Z,QTooltip:x.Z,QMenu:W.Z}),C()(m,"directives",{Ripple:U.Z})},1293:(e,t,s)=>{s.r(t),s.d(t,{default:()=>E});s(3610);var a=s(3673),r=s(8880),o=s(2323);const l={class:"row no-wrap q-px-md q-pb-xs q-pt-md justify-arround",style:{"min-width":"325px","max-width":"450px"}},i={class:"column col"},n=(0,a._)("div",{class:"text-h6"},"Settings",-1),u={class:"column col items-center"},c={class:"text-body2 q-mt-md text-center"},d={class:"q-px-md q-pt-xs q-pb-md"},m={class:"absolute-top bg-primary text-white",style:{height:"170px"}},p={class:"absolute-bottom bg-transparent q-ma-md"},h={class:"text-weight-bold text-subtitle1"};function f(e,t,s,f,g,w){const y=(0,a.up)("q-icon"),b=(0,a.up)("q-tooltip"),v=(0,a.up)("q-toolbar-title"),_=(0,a.up)("q-btn"),k=(0,a.up)("q-space"),q=(0,a.up)("q-separator"),x=(0,a.up)("q-circular-progress"),W=(0,a.up)("q-menu"),U=(0,a.up)("q-toolbar"),D=(0,a.up)("q-header"),C=(0,a.up)("router-view"),Z=(0,a.up)("q-page-container"),M=(0,a.up)("users-list"),Q=(0,a.up)("q-scroll-area"),z=(0,a.up)("q-drawer"),$=(0,a.up)("q-page-scroller"),j=(0,a.up)("q-layout"),I=(0,a.Q2)("close-popup");return(0,a.wg)(),(0,a.j4)(j,{view:"lHr LpR lFr"},{default:(0,a.w5)((()=>[(0,a.Wm)(r.uT,{appear:"","enter-active-class":"animated fadeIn slow","leave-active-class":"animated fadeOut slow"},{default:(0,a.w5)((()=>[e.isAuthPage?(0,a.kq)("",!0):((0,a.wg)(),(0,a.j4)(D,{key:0,elevated:""},{default:(0,a.w5)((()=>[(0,a.Wm)(U,null,{default:(0,a.w5)((()=>[(0,a.Wm)(v,{class:"absolute-center"},{default:(0,a.w5)((()=>[(0,a.Uk)((0,o.zw)(e.title)+" ",1),e.$route.fullPath.includes(e.$myvar.router.chat.url+"/")&&e.otherUserId&&e.otherUserDetails.name&&e.otherUserDetails.online&&!e.otherUserDetails.invisible?((0,a.wg)(),(0,a.j4)(y,{key:0,size:"xs",color:"secondary",name:"check_circle"})):(0,a.kq)("",!0),e.otherUserDetails.name?((0,a.wg)(),(0,a.j4)(b,{key:1,delay:100,offset:[10,10],self:"top middle",anchor:"bottom middle",class:(0,o.C_)(e.otherUserDetails.online&&!e.otherUserDetails.invisible?"bg-secondary text-grey-9":"bg-grey-6 text-grey-9")},{default:(0,a.w5)((()=>[(0,a.Wm)(y,{size:"xs",color:"grey-9",name:e.otherUserDetails.online&&!e.otherUserDetails.invisible?"wifi_tethering":"wifi_tethering_off"},null,8,["name"]),(0,a.Uk)(" "+(0,o.zw)(e.otherUserDetails.online&&!e.otherUserDetails.invisible?"Online":"Offline"),1)])),_:1},8,["class"])):(0,a.kq)("",!0)])),_:1}),e.userDetails.passphrase?((0,a.wg)(),(0,a.j4)(_,{key:0,flat:"",dense:"",round:"",ripple:"",icon:"people",color:"secondary",onMouseover:t[0]||(t[0]=e=>{e.target.style.color="white"}),onMouseout:t[1]||(t[1]=t=>{t.target.style.color=e.secondaryColor}),onClick:t[2]||(t[2]=t=>e.drawerUsersList=!e.drawerUsersList)},{default:(0,a.w5)((()=>[(0,a.Wm)(b,{anchor:"bottom middle",self:"top middle",offset:[10,10],delay:100},{default:(0,a.w5)((()=>[(0,a.Uk)(" Users ")])),_:1})])),_:1})):(0,a.kq)("",!0),(0,a.Wm)(k),e.userDetails.passphrase?((0,a.wg)(),(0,a.j4)(_,{key:1,flat:"",dense:"",round:"",ripple:"",icon:"account_circle",color:"secondary",onMouseover:t[3]||(t[3]=e=>{e.target.style.color="white"}),onMouseout:t[4]||(t[4]=t=>{t.target.style.color=e.secondaryColor})},{default:(0,a.w5)((()=>[(0,a.Wm)(W,{"transition-show":"jump-down","transition-hide":"jump-up"},{default:(0,a.w5)((()=>[(0,a._)("div",l,[(0,a._)("div",i,[n,(0,a.Wm)(_,{flat:"","no-caps":"",rounded:"",ripple:"",size:"md",color:"grey-9",label:"Visible",onClick:e.updateInvisibility,icon:e.userDetails.invisible?"visibility_off":"visibility"},null,8,["onClick","icon"]),(0,a.wy)((0,a.Wm)(_,{flat:"","no-caps":"",rounded:"",ripple:"",size:"md",icon:"logout",label:"Logout",color:"grey-9",onClick:e.logout},null,8,["onClick"]),[[I]])]),(0,a.Wm)(q,{vertical:"",inset:"",class:"q-mx-lg"}),(0,a._)("div",u,[(0,a.Wm)(x,{"show-value":"",min:0,max:30,thickness:.1,indeterminate:!e.isChatPage,size:"72px","font-size":"25px",color:"secondary","track-color":"grey-3","center-color":"primary",class:"text-weight-bold text-white"},{default:(0,a.w5)((()=>[(0,a.Uk)((0,o.zw)(e.userDetails.name&&e.userDetails.passphrase?e.userDetails.name.charAt(0):"X"),1)])),_:1},8,["thickness","indeterminate"]),(0,a._)("div",c,(0,o.zw)(e.userDetails.name),1)])]),(0,a.Wm)(q,{inset:"",class:"q-my-sm"}),(0,a._)("div",d,[(0,a.Wm)(_,{stack:"",round:"",outline:"",ripple:"",icon:"message",color:"primary",class:"q-ma-xs q-px-sm",to:e.$myvar.router.chat.url},{default:(0,a.w5)((()=>[(0,a.Wm)(b,{anchor:"bottom middle",self:"top middle",offset:[10,10],delay:100},{default:(0,a.w5)((()=>[(0,a.Uk)((0,o.zw)(e.$myvar.router.chat.tooltip),1)])),_:1})])),_:1},8,["to"]),(0,a.Wm)(_,{stack:"",round:"",outline:"",ripple:"",color:"primary",icon:"analytics",class:"q-ma-xs q-px-sm",to:e.$myvar.router.budget.url},{default:(0,a.w5)((()=>[(0,a.Wm)(b,{anchor:"bottom middle",self:"top middle",offset:[10,10],delay:100},{default:(0,a.w5)((()=>[(0,a.Uk)((0,o.zw)(e.$myvar.router.budget.tooltip),1)])),_:1})])),_:1},8,["to"]),(0,a.Wm)(_,{stack:"",round:"",outline:"",ripple:"",color:"primary",icon:"bookmark",class:"q-ma-xs q-px-sm",to:e.$myvar.router.diary.url},{default:(0,a.w5)((()=>[(0,a.Wm)(b,{anchor:"bottom middle",self:"top middle",offset:[10,10],delay:100},{default:(0,a.w5)((()=>[(0,a.Uk)((0,o.zw)(e.$myvar.router.diary.tooltip),1)])),_:1})])),_:1},8,["to"])])])),_:1}),(0,a.Wm)(b,{anchor:"bottom middle",self:"top middle",offset:[10,10],delay:100},{default:(0,a.w5)((()=>[(0,a.Uk)(" Account ")])),_:1})])),_:1})):(0,a.kq)("",!0)])),_:1})])),_:1}))])),_:1}),(0,a.Wm)(Z,null,{default:(0,a.w5)((()=>[(0,a.Wm)(C,null,{default:(0,a.w5)((({Component:e})=>[((0,a.wg)(),(0,a.j4)(a.Ob,null,[((0,a.wg)(),(0,a.j4)((0,a.LL)(e)))],1024))])),_:1})])),_:1}),(0,a.Wm)(r.uT,{appear:"","enter-active-class":"animated fadeIn slow","leave-active-class":"animated fadeOut slow"},{default:(0,a.w5)((()=>[!e.isAuthPage&&e.userDetails.passphrase?((0,a.wg)(),(0,a.j4)(z,{key:0,bordered:"",width:320,"show-if-above":"",breakpoint:700,modelValue:e.drawerUsersList,"onUpdate:modelValue":t[5]||(t[5]=t=>e.drawerUsersList=t),side:e.$route.fullPath.includes(e.$myvar.router.chat.url)||e.$q.platform.is.mobile?"left":"right"},{default:(0,a.w5)((()=>[(0,a._)("div",m,[(0,a._)("div",p,[(0,a.Wm)(x,{"show-value":"",min:0,max:30,thickness:.1,indeterminate:"",size:"56px","font-size":"25px",color:"secondary","track-color":"grey-3","center-color":"primary",class:"text-weight-bold"},{default:(0,a.w5)((()=>[(0,a.Uk)((0,o.zw)(e.userDetails.name&&e.userDetails.passphrase?e.userDetails.name.charAt(0):"X"),1)])),_:1},8,["thickness"]),(0,a._)("div",h,(0,o.zw)(e.userDetails.passphrase&&e.userDetails.name?e.userDetails.name:"********"),1),(0,a._)("div",null," @"+(0,o.zw)(e.userDetails.passphrase&&e.userDetails.userId?e.userDetails.userId:"*****"),1)])]),(0,a.Wm)(Q,{style:{"margin-top":"170px",height:"calc(100% - 170px)","border-right":"1px solid #ddd"}},{default:(0,a.w5)((()=>[(0,a.Wm)(M)])),_:1})])),_:1},8,["modelValue","side"])):(0,a.kq)("",!0)])),_:1}),e.$route.fullPath.includes(e.$myvar.router.chat.url)?(0,a.kq)("",!0):((0,a.wg)(),(0,a.j4)($,{key:0,offset:[10,10],"scroll-offset":170,position:"bottom-right"},{default:(0,a.w5)((()=>[(0,a.Wm)(_,{fab:"",ripple:"",color:"primary",style:{opacity:"0.75"},icon:"keyboard_arrow_up"})])),_:1}))])),_:1})}var g=s(2490),w=s(741),y=s(1914),b=s(9905),v=s(6395),_=s(8825),k=s(3552);const q=(0,a.aZ)({name:"MainLayout",mixins:[k.k0,k.ii],components:{"users-list":s(7157).Z},data(){return{$q:_.Z,bootvar:g.myvar,drawerUsersList:!1,primaryColor:(0,b.Z)("primary"),secondaryColor:(0,b.Z)("secondary")}},computed:{...(0,w.rn)("firebase_auth",["userDetails"]),title(){let e=this.$route.fullPath;return e==g.myvar.router.budget.url?g.myvar.router.budget.title:e==g.myvar.router.chat.url?g.myvar.router.chat.title:e.includes(g.myvar.router.chat.url+"/")&&(this.otherUserId||this.isSelfChat)?this.isSelfChat?"Just You":this.otherUserDetails.name?this.otherUserDetails.name:g.myvar.router.chat.title:e==g.myvar.router.diary.url?g.myvar.router.diary.title:e==g.myvar.router.auth.url?g.myvar.router.auth.title:void 0},isAuthPage(){return this.$route.fullPath==g.myvar.router.auth.url},isChatPage(){return!!this.$route.fullPath.includes(g.myvar.router.chat.url)},isLogin(){return!!(this.userDetails&&this.userDetails.passphrase&&v.Z.has(g.myvar.localStorage.userDetails))}},watch:{bootvar:{async handler(e){const t=e.messages.todelete;t.length&&t.forEach(((e,t)=>{this.autoRemoveMessage({...e,id:t})}))},deep:!0},otherUserId:{async handler(e){!e&&this.$route.fullPath.includes(g.myvar.router.chat.url)&&(this.drawerUsersList=!0)},deep:!0},isLogin:{async handler(e){e?this.firebaseGetNotifications():this.firebaseStopGettingNotifications()},deep:!0}},methods:{...(0,w.nv)("firebase_auth",["firebaseUpdateUser","firebaseStopGettingUsers"]),...(0,w.nv)("firebase_chat",["firebaseDeleteMessage"]),...(0,w.nv)("firebase_budget",["firebaseStopGettingTransactions"]),...(0,w.nv)("firebase_notification",["firebaseGetNotifications","firebaseStopGettingNotifications"]),updateInvisibility(){this.firebaseUpdateUser({userId:this.userDetails.userId,updates:{invisible:!this.userDetails.invisible}})},async autoRemoveMessage(e){await this.firebaseDeleteMessage({messageId:e.msgid,otherUserId:e.usrid,deleteForEveryone:e.deleteForEveryone}).then((t=>{t.success?((0,y.Z)(e.msg).then((()=>{console.log("Message deleted, backup copied to clipboard!")})).catch((e=>{console.log("Message deleted, no backup!",e.message)})),g.myvar.messages.todelete.splice([e.id],1)):console.warn("Message deletion failed!")})).catch((e=>{console.error("Delete Error: ",e.message)}))}}});var x=s(4260),W=s(9214),U=s(3812),D=s(9570),C=s(3747),Z=s(4554),M=s(8870),Q=s(8240),z=s(2025),$=s(811),j=s(5869),I=s(6122),P=s(2652),L=s(2901),S=s(7704),O=s(8835),A=s(677),T=s(7518),H=s.n(T);const G=(0,x.Z)(q,[["render",f]]),E=G;H()(q,"components",{QLayout:W.Z,QHeader:U.Z,QToolbar:D.Z,QToolbarTitle:C.Z,QIcon:Z.Z,QTooltip:M.Z,QBtn:Q.Z,QSpace:z.Z,QMenu:$.Z,QSeparator:j.Z,QCircularProgress:I.Z,QPageContainer:P.Z,QDrawer:L.Z,QScrollArea:S.Z,QPageScroller:O.Z}),H()(q,"directives",{ClosePopup:A.Z})}}]);