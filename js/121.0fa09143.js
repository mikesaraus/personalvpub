"use strict";(globalThis["webpackChunkpersonal"]=globalThis["webpackChunkpersonal"]||[]).push([[121],{1121:(e,t,i)=>{i.r(t),i.d(t,{default:()=>F});var l=i(3673),a=i(8880),s=i(2323);const o={class:"q-py-lg q-px-md row items-end q-col-gutter-md"},n={class:"col"},r={class:"col col-shrink"},d={key:0,class:"paperbg"},m=["innerHTML"],u={class:"text-center text-grey-6 text-weight-light q-pb-lg"},c={key:1,class:"no-history text-center q-mt-xl"},p=(0,l._)("div",{class:"text-h5 text-primary"},"No History",-1),w=(0,l._)("span",{class:"q-ml-sm text-subtitle1 text-weight-medium"},"Edit Story",-1),f=(0,l._)("span",{class:"q-ml-sm text-subtitle1 text-weight-medium"},"Story Title",-1);function h(e,t,i,h,y,g){const b=(0,l.up)("q-avatar"),P=(0,l.up)("q-input"),_=(0,l.up)("q-btn"),k=(0,l.up)("q-separator"),W=(0,l.up)("q-skeleton"),C=(0,l.up)("q-timeline-entry"),q=(0,l.up)("q-intersection"),v=(0,l.up)("q-icon"),x=(0,l.up)("q-item-section"),T=(0,l.up)("q-item"),D=(0,l.up)("q-list"),Z=(0,l.up)("q-menu"),Q=(0,l.up)("q-timeline"),S=(0,l.up)("q-pull-to-refresh"),z=(0,l.up)("q-card-section"),V=(0,l.up)("q-card-actions"),E=(0,l.up)("q-card"),U=(0,l.up)("q-dialog"),I=(0,l.up)("q-page"),L=(0,l.Q2)("ripple"),A=(0,l.Q2)("close-popup");return(0,l.wg)(),(0,l.j4)(I,{ref:"pageDiary"},{default:(0,l.w5)((()=>[(0,l.Wm)(S,{onRefresh:e.refresh},{default:(0,l.w5)((()=>[(0,l.Wm)(a.uT,{appear:"","enter-active-class":"animated rubberBand slow","leave-active-class":"animated fadeOutUp slow"},{default:(0,l.w5)((()=>[(0,l._)("div",o,[(0,l._)("div",n,[(0,l.Wm)(P,{modelValue:e.newPostContent,"onUpdate:modelValue":t[0]||(t[0]=t=>e.newPostContent=t),class:"new-post",ref:"newPostContent",placeholder:"What's happening?",counter:"",autogrow:""},{before:(0,l.w5)((()=>[(0,l.Wm)(b,{color:"primary","text-color":"white",size:"xl",icon:"timeline"})])),_:1},8,["modelValue"])]),(0,l._)("div",r,[(0,l.Wm)(_,{rounded:"",unelevated:"",label:"post",class:"q-mb-lg",color:"primary",disable:!e.newPostContent,onClick:t[1]||(t[1]=t=>e.dialogTitle=!0)},null,8,["disable"])])])])),_:1}),(0,l.Wm)(k,{class:"divider",color:"grey-2",size:"10px"}),e.diary.length||e.preloader?((0,l.wg)(),(0,l.iD)("div",d,[(0,l.Wm)(Q,{color:"secondary",class:"q-pa-lg",layout:e.timelineLayout,style:{"overflow-wrap":"anywhere"}},{default:(0,l.w5)((()=>[e.preloader?((0,l.wg)(),(0,l.j4)(a.W3,{key:0,appear:"","enter-active-class":"animated bounceInUp slow","leave-active-class":"animated fadeOutBottomRight slow"},{default:(0,l.w5)((()=>[((0,l.wg)(),(0,l.iD)(l.HY,null,(0,l.Ko)(3,(e=>(0,l.wy)((0,l.Wm)(C,{key:"skeleton_"+e,side:e%2==0?"right":"left",color:"secondary",icon:"far fa-heart",style:{cursor:"pointer"}},{title:(0,l.w5)((()=>[(0,l.Wm)(W,{type:"QChip"})])),default:(0,l.w5)((()=>[(0,l.Wm)(W,{type:"text"})])),_:2},1032,["side"]),[[L,{color:"grey-9"}]]))),64))])),_:1})):((0,l.wg)(),(0,l.j4)(a.W3,{key:1,appear:"","enter-active-class":"animated fadeIn slow","leave-active-class":"animated fadeOutBottomRight slow"},{default:(0,l.w5)((()=>[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(e.diary,((t,i)=>(0,l.wy)(((0,l.wg)(),(0,l.j4)(C,{ref_for:!0,ref:t.id,key:t.id,onDblclick:i=>e.toogleLike(t),side:i%2==0?"right":"left",color:t.liked?"primary":"secondary",icon:t.liked?"fas fa-heart":"far fa-heart"},{title:(0,l.w5)((()=>[(0,l._)("div",null,(0,s.zw)(t.title),1)])),subtitle:(0,l.w5)((()=>[((0,l.wg)(),(0,l.iD)("div",{key:e.minuteTimer},(0,s.zw)(e.relativeDate(t.timestamp)),1))])),default:(0,l.w5)((()=>[(0,l.Wm)(q,{once:"",transition:"scale"},{default:(0,l.w5)((()=>[(0,l._)("span",{innerHTML:e.addLinkHtml(t.content)},null,8,m)])),_:2},1024),(0,l.Wm)(Z,{"context-menu":"",onShow:i=>e.$refs[t.id].$el.click()},{default:(0,l.w5)((()=>[(0,l.Wm)(D,null,{default:(0,l.w5)((()=>[(0,l.wy)(((0,l.wg)(),(0,l.j4)(T,{clickable:"",onClick:i=>e.toogleLike(t)},{default:(0,l.w5)((()=>[(0,l.Wm)(x,{avatar:"",style:{"min-width":"35px"}},{default:(0,l.w5)((()=>[(0,l.Wm)(v,{name:t.liked?"fas fa-heart":"far fa-heart"},null,8,["name"])])),_:2},1024),(0,l.Wm)(x,null,{default:(0,l.w5)((()=>[(0,l.Uk)((0,s.zw)(t.liked?"Liked":"Like"),1)])),_:2},1024)])),_:2},1032,["onClick"])),[[A]]),(0,l.Wm)(k),(0,l.wy)(((0,l.wg)(),(0,l.j4)(T,{clickable:"",onClick:i=>e.enableEdit(t)},{default:(0,l.w5)((()=>[(0,l.Wm)(x,{avatar:"",style:{"min-width":"35px"}},{default:(0,l.w5)((()=>[(0,l.Wm)(v,{name:"mode_edit_outline"})])),_:1}),(0,l.Wm)(x,null,{default:(0,l.w5)((()=>[(0,l.Uk)("Edit")])),_:1})])),_:2},1032,["onClick"])),[[A]]),(0,l.Wm)(k),(0,l.wy)(((0,l.wg)(),(0,l.j4)(T,{clickable:"",onClick:i=>e.deletePost(t)},{default:(0,l.w5)((()=>[(0,l.Wm)(x,{avatar:"",style:{"min-width":"35px"}},{default:(0,l.w5)((()=>[(0,l.Wm)(v,{name:"delete_outline"})])),_:1}),(0,l.Wm)(x,null,{default:(0,l.w5)((()=>[(0,l.Uk)("Delete")])),_:1})])),_:2},1032,["onClick"])),[[A]])])),_:2},1024)])),_:2},1032,["onShow"])])),_:2},1032,["onDblclick","side","color","icon"])),[[L,{color:"primary"}]]))),128))])),_:1}))])),_:1},8,["layout"]),(0,l._)("div",u,[(0,l.Wm)(v,{name:"horizontal_rule"}),(0,l.Uk)(" End of History "),(0,l.Wm)(v,{name:"horizontal_rule"})])])):((0,l.wg)(),(0,l.iD)("div",c,[(0,l.Wm)(v,{name:"timeline",size:"100px",color:"primary"}),p]))])),_:1},8,["onRefresh"]),(0,l.Wm)(U,{modelValue:e.dialogEdit,"onUpdate:modelValue":t[4]||(t[4]=t=>e.dialogEdit=t)},{default:(0,l.w5)((()=>[(0,l.Wm)(E,{style:{width:"700px","max-width":"80vw"},class:"q-pa-sm"},{default:(0,l.w5)((()=>[(0,l.Wm)(z,{class:"row items-center"},{default:(0,l.w5)((()=>[(0,l.Wm)(b,{icon:"edit_note",color:"primary","text-color":"white"}),w])),_:1}),(0,l.Wm)(z,{class:"q-pt-none"},{default:(0,l.w5)((()=>[(0,l.Wm)(P,{autofocus:"","lazy-rules":"",tabindex:"1",class:"new-post",ref:"editPostTitle",modelValue:e.editPostTitle,"onUpdate:modelValue":t[2]||(t[2]=t=>e.editPostTitle=t),placeholder:"Add a Title"},{prepend:(0,l.w5)((()=>[(0,l.Wm)(b,{size:"xl",icon:"title",class:"primary"})])),_:1},8,["modelValue"]),(0,l.Wm)(P,{"lazy-rules":"",autogrow:"",class:"new-post",placeholder:"What's happening?",ref:"editPostContent",modelValue:e.editPostContent,"onUpdate:modelValue":t[3]||(t[3]=t=>e.editPostContent=t),tabindex:"2"},{prepend:(0,l.w5)((()=>[(0,l.Wm)(b,{"text-color":"primary",size:"xl",icon:"text_fields"})])),_:1},8,["modelValue"])])),_:1}),(0,l.Wm)(V,{align:"right"},{default:(0,l.w5)((()=>[(0,l.wy)((0,l.Wm)(_,{flat:"",type:"reset",tabindex:"4",label:"Cancel",color:"grey-6",ref:"formEditsReset",onClick:e.resetEditPost},null,8,["onClick"]),[[A]]),(0,l.wy)((0,l.Wm)(_,{flat:"",tabindex:"3",label:"Confirm",color:"primary",onClick:e.editPost,ref:"formEditSubmit"},null,8,["onClick"]),[[A,e.editStatus.value]])])),_:1})])),_:1})])),_:1},8,["modelValue"]),(0,l.Wm)(U,{modelValue:e.dialogTitle,"onUpdate:modelValue":t[6]||(t[6]=t=>e.dialogTitle=t)},{default:(0,l.w5)((()=>[(0,l.Wm)(E,{style:{width:"700px","max-width":"80vw"},class:"q-pa-sm"},{default:(0,l.w5)((()=>[(0,l.Wm)(z,{class:"row items-center"},{default:(0,l.w5)((()=>[(0,l.Wm)(b,{icon:"timeline",color:"primary","text-color":"white"}),f])),_:1}),(0,l.Wm)(z,{class:"q-pt-none"},{default:(0,l.w5)((()=>[(0,l.Wm)(P,{autofocus:"","lazy-rules":"",tabindex:"1",ref:"newPostTitle",modelValue:e.newPostTitle,"onUpdate:modelValue":t[5]||(t[5]=t=>e.newPostTitle=t),class:"q-py-sm new-post",placeholder:"Add a Title"},{prepend:(0,l.w5)((()=>[(0,l.Wm)(b,{size:"xl",icon:"title",class:"primary"})])),_:1},8,["modelValue"])])),_:1}),(0,l.Wm)(V,{align:"right"},{default:(0,l.w5)((()=>[(0,l.wy)((0,l.Wm)(_,{flat:"",ref:"formDetailsReset",label:"Cancel",type:"reset",color:"grey-6",tabindex:"3",onClick:e.resetNewPost},null,8,["onClick"]),[[A]]),(0,l.wy)((0,l.Wm)(_,{flat:"",tabindex:"2",color:"primary",label:"Confirm",onClick:e.addNewPost,ref:"formDetailsSubmit"},null,8,["onClick"]),[[A,e.postStatus.value]])])),_:1})])),_:1})])),_:1},8,["modelValue"])])),_:1},512)}var y=i(741),g=i(3552),b=i(8825),P=i(6386);const _=(0,l.aZ)({name:"Diary",mixins:[g.y7,g.E1,g.aY],data(){return{$q:(0,b.Z)(),newPostContent:"",newPostTitle:"",dialogTitle:!1,postStatus:!1,editStatus:!1,dialogEdit:!1,editPostTitle:"",editPostContent:"",editPostId:"",addLinkHtml:P.it}},beforeMount(){this.userDetails.passphrase&&this.firebaseGetAllDiary()},mounted(){this.startPreloading(this.diary),this.userDetails.passphrase&&!this.diary.length&&this.firebaseGetAllDiary()},computed:{...(0,y.rn)("firebase_auth",["userDetails"]),...(0,y.rn)("firebase_diary",["diary"]),timelineLayout(){return this.$q.screen.lt.sm?"dense":this.$q.screen.lt.md?"comfortable":"loose"}},methods:{...(0,y.nv)("firebase_diary",["firebaseGetAllDiary","firebaseAddDiary","firebaseUpdateDiary","firebaseClearDiary","firebaseDeleteDiary","firebaseStopGettingDiary"]),refresh(e){setTimeout((()=>{this.firebaseGetAllDiary(),e()}),1e3)},async addNewPost(){if(this.newPostTitle&&this.newPostContent){let e={timestamp:Date.now(),liked:!1,title:this.newPostTitle,content:this.newPostContent},t=await this.firebaseAddDiary(e);t.success?(this.postStatus=!0,setTimeout((()=>{(0,P.qz)("Story has been added.","positive")}),300),this.resetNewPost()):setTimeout((()=>{(0,P.qz)("Failed to add story.","negative")}),300)}else setTimeout((()=>{(0,P.qz)("Please add some story.","warning")}),300)},resetNewPost(){this.newPostTitle="",this.newPostContent="",this.postStatus=!1},resetEditPost(){this.editPostTitle="",this.editPostContent="",this.editPostId="",this.editStatus=!1},toogleLike(e){this.firebaseUpdateDiary({id:e.id,updates:{liked:!e.liked}})},enableEdit(e){this.dialogEdit=!0,this.editPostTitle=e.title,this.editPostContent=e.content,this.editPostId=e.id},async editPost(){if(this.editPostId&&this.editPostTitle&&this.editPostContent){let e=await this.firebaseUpdateDiary({id:this.editPostId,updates:{title:this.editPostTitle,content:this.editPostContent}});e.success?(this.editStatus=!0,setTimeout((()=>{(0,P.qz)("Story has been modified.","positive")}),300),this.resetEditPost()):setTimeout((()=>{(0,P.qz)("Failed to edit story.","negative")}),300)}else setTimeout((()=>{(0,P.qz)("Please add some story.","warning")}),300)},deletePost(e){this.firebaseDeleteDiary({id:e.id})}},beforeUnmount(){this.firebaseStopGettingDiary()}});var k=i(4260),W=i(4379),C=i(3720),q=i(4842),v=i(5096),x=i(8240),T=i(5869),D=i(1432),Z=i(3424),Q=i(4103),S=i(8218),z=i(811),V=i(7011),E=i(3414),U=i(2035),I=i(4554),L=i(6778),A=i(151),H=i(5589),R=i(9367),j=i(6115),G=i(6489),N=i(677),$=i(7518),B=i.n($);const M=(0,k.Z)(_,[["render",h]]),F=M;B()(_,"components",{QPage:W.Z,QPullToRefresh:C.Z,QInput:q.Z,QAvatar:v.Z,QBtn:x.Z,QSeparator:T.Z,QTimeline:D.Z,QTimelineEntry:Z.Z,QSkeleton:Q.ZP,QIntersection:S.Z,QMenu:z.Z,QList:V.Z,QItem:E.Z,QItemSection:U.Z,QIcon:I.Z,QDialog:L.Z,QCard:A.Z,QCardSection:H.Z,QCardActions:R.Z,QField:j.Z}),B()(_,"directives",{Ripple:G.Z,ClosePopup:N.Z})}}]);