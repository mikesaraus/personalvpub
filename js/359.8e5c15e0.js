"use strict";(globalThis["webpackChunkpersonal"]=globalThis["webpackChunkpersonal"]||[]).push([[359],{3905:(e,a,t)=>{t.d(a,{Z:()=>k});var s=t(3673);const i={class:"row"};function r(e,a,t,r,l,n){const o=(0,s.up)("q-icon"),p=(0,s.up)("q-btn"),d=(0,s.up)("q-input"),u=(0,s.up)("q-space"),c=(0,s.up)("q-spinner-facebook"),m=(0,s.up)("q-form");return(0,s.wg)(),(0,s.j4)(m,{onSubmit:e.submitForm},{default:(0,s.w5)((()=>["register"==e.tab?((0,s.wg)(),(0,s.j4)(d,{key:0,modelValue:e.formData.name,"onUpdate:modelValue":a[1]||(a[1]=a=>e.formData.name=a),label:"Public Name",ref:"fieldName",outlined:"",tabindex:"1",class:"q-mb-md","lazy-rules":"",rules:[a=>e.checker.input(!!a||"",1e3)]},{prepend:(0,s.w5)((()=>[(0,s.Wm)(o,{round:"",dense:"",flat:"",size:"xs",name:"person"})])),append:(0,s.w5)((()=>[e.formData.name?((0,s.wg)(),(0,s.j4)(p,{key:0,flat:"",round:"",dense:"",ripple:"",icon:"clear",onClick:a[0]||(a[0]=a=>e.formData.name="")})):(0,s.kq)("",!0)])),_:1},8,["modelValue","rules"])):(0,s.kq)("",!0),(0,s.Wm)(d,{modelValue:e.formData.email,"onUpdate:modelValue":a[3]||(a[3]=a=>e.formData.email=a),label:"Email",type:"email",outlined:"",autocomplete:"",tabindex:"2",class:"q-mb-md",ref:"fieldEmail","lazy-rules":"",rules:[a=>e.checker.input({value:a,type:"email"},1e3)]},{prepend:(0,s.w5)((()=>[(0,s.Wm)(o,{round:"",dense:"",flat:"",size:"xs",name:"email"})])),append:(0,s.w5)((()=>[e.formData.email?((0,s.wg)(),(0,s.j4)(p,{key:0,flat:"",round:"",dense:"",ripple:"",icon:"clear",onClick:a[2]||(a[2]=a=>e.formData.email="")})):(0,s.kq)("",!0)])),_:1},8,["modelValue","rules"]),(0,s.Wm)(d,{modelValue:e.formData.password,"onUpdate:modelValue":a[6]||(a[6]=a=>e.formData.password=a),label:"Password",ref:"fieldPassword",outlined:"",autocomplete:"",tabindex:"3",class:"q-mb-md",type:e.passfieldType,onFocus:a[7]||(a[7]=a=>e.passEye=!0),onBlur:a[8]||(a[8]=a=>e.passEye=!1),"lazy-rules":"",rules:[a=>e.checker.input("register"==e.tab?{value:a,type:"password"}:!!a||"",1e3)]},{prepend:(0,s.w5)((()=>[(0,s.Wm)(o,{round:"",dense:"",flat:"",size:"xs",name:"lock"})])),append:(0,s.w5)((()=>[e.formData.password&&e.passEye?((0,s.wg)(),(0,s.j4)(p,{key:0,flat:"",round:"",dense:"",ripple:"",icon:"text"==e.passfieldType.toLowerCase()?"visibility_off":"visibility",onClick:a[4]||(a[4]=a=>e.togglePassView())},null,8,["icon"])):(0,s.kq)("",!0),e.formData.password?((0,s.wg)(),(0,s.j4)(p,{key:1,flat:"",round:"",dense:"",ripple:"",icon:"clear",onClick:a[5]||(a[5]=a=>e.formData.password="")})):(0,s.kq)("",!0)])),_:1},8,["modelValue","type","rules"]),"register"==e.tab?((0,s.wg)(),(0,s.j4)(d,{key:1,modelValue:e.formData.invite,"onUpdate:modelValue":a[10]||(a[10]=a=>e.formData.invite=a),label:"Invitation Code",ref:"fieldInviteCode",outlined:"",tabindex:"4",class:"q-mb-md","lazy-rules":"",rules:[a=>e.checker.input(!!a&&a===e.inviteCode||e.openInvite()||"Hello, are we friends?",1e3)]},{prepend:(0,s.w5)((()=>[(0,s.Wm)(o,{round:"",dense:"",flat:"",size:"xs",name:"vpn_key"})])),append:(0,s.w5)((()=>[e.formData.invite?((0,s.wg)(),(0,s.j4)(p,{key:0,flat:"",round:"",dense:"",ripple:"",icon:"clear",onClick:a[9]||(a[9]=a=>e.formData.invite="")})):(0,s.kq)("",!0)])),_:1},8,["modelValue","rules"])):(0,s.kq)("",!0),(0,s._)("div",i,[(0,s.Wm)(u),(0,s.Wm)(p,{ripple:"",tabindex:"5",label:"Submit",type:"submit",color:"primary",ref:"btnSubmit",loading:e.decrypting.status,percentage:e.decrypting.percentage},{loading:(0,s.w5)((()=>[(0,s.Wm)(c,{size:"xs",class:"on-left"})])),_:1},8,["loading","percentage"])])])),_:1},8,["onSubmit"])}t(3610);var l=t(8825),n=t(741),o=t(5474),p=t(6386);const d=(0,s.aZ)({name:"login-register",props:["tab"],data(){return{$q:(0,l.Z)(),checker:p.BF,formData:{name:"",email:"",password:"",invite:""},private_invite:["saraus","salam"],passEye:!1,inviteCode:"",passfieldType:"password",decrypting:{status:!1,percentage:0},interval:null}},created(){"register"==this.tab&&this.generateInviteCode()},computed:{...(0,n.rn)("firebase_auth",["userDetails"])},methods:{...(0,n.nv)("firebase_auth",["registerUser","loginUser"]),openInvite(){return!!this.formData.name.toLowerCase().includes("saraus")||(this.private_invite.forEach((e=>{if(this.formData.invite.toLowerCase()==e)return!0})),!1)},async submitForm(){if(this.decrypting.status=!0,"login"==this.tab){const e=await this.loginUser(this.formData);e.success?this.btnLoadingInterval((0,p.qz)("Decrypting user data...","ongoing",500,null,{color:"primary"})):this.btnLoadingInterval((0,p.qz)("Login failed!","negative"))}else if(this.inviteCode==this.formData.invite||this.openInvite()){const e=await this.registerUser(this.formData);e.success?this.btnLoadingInterval():this.btnLoadingInterval((0,p.qz)("Registration failed!","warning"))}else this.btnLoadingInterval((0,p.qz)("You are not invited!","warning"))},generateInviteCode(){o.random_word.get("?number=1").then((e=>{const a=e.data[0];console.log("%c"+a,"color: grey; font-size: 1.3em; text-weight: bold;"),this.inviteCode=a})).catch((()=>{console.log("No Invitation!")}))},btnLoadingInterval(e){this.interval=setInterval((()=>{this.decrypting.percentage+=Math.floor(8*Math.random()+10),this.decrypting.percentage>=100&&(e&&e(),this.decrypting.status=!1,clearInterval(this.interval))}),100)},togglePassView(e=3e3){this.passfieldType="text"==this.passfieldType.toLowerCase()?"password":"text",e&&e>0&&setTimeout((()=>{"text"==this.passfieldType.toLowerCase()&&(this.passfieldType="password")}),e)}},beforeUnmount(){this.interval&&clearInterval(this.interval)}});var u=t(4260),c=t(5269),m=t(4842),h=t(4554),g=t(8240),f=t(2025),b=t(8719),y=t(7518),w=t.n(y);const v=(0,u.Z)(d,[["render",r]]),k=v;w()(d,"components",{QForm:c.Z,QInput:m.Z,QIcon:h.Z,QBtn:g.Z,QSpace:f.Z,QSpinnerFacebook:b.Z})},6359:(e,a,t)=>{t.r(a),t.d(a,{default:()=>E});var s=t(3673),i=t(2323);const r={key:0},l={class:"q-pa-md"},n={class:"row"};function o(e,a,t,o,p,d){const u=(0,s.up)("q-toolbar-title"),c=(0,s.up)("q-toolbar"),m=(0,s.up)("q-tab"),h=(0,s.up)("q-tabs"),g=(0,s.up)("q-separator"),f=(0,s.up)("login-register"),b=(0,s.up)("q-tab-panel"),y=(0,s.up)("q-tab-panels"),w=(0,s.up)("q-icon"),v=(0,s.up)("q-tooltip"),k=(0,s.up)("q-btn"),D=(0,s.up)("q-input"),q=(0,s.up)("q-space"),x=(0,s.up)("q-spinner-facebook"),_=(0,s.up)("q-form"),W=(0,s.up)("q-card"),Z=(0,s.up)("q-page");return(0,s.wg)(),(0,s.j4)(Z,{class:"flex q-pa-md flex-center page-auth"},{default:(0,s.w5)((()=>[e.userDetails.passphrase?(0,s.kq)("",!0):((0,s.wg)(),(0,s.j4)(W,{key:0,style:{width:"500px","max-width":"1000px"}},{default:(0,s.w5)((()=>[e.userDetails.passphrase||e.userDetails.email?((0,s.wg)(),(0,s.j4)(_,{key:1,onSubmit:e.submitPassphrase},{default:(0,s.w5)((()=>[(0,s.Wm)(c,{class:"bg-primary text-white"},{default:(0,s.w5)((()=>[(0,s.Wm)(w,{color:"grey-3",name:"admin_panel_settings",size:"md"}),(0,s.Wm)(u,null,{default:(0,s.w5)((()=>[(0,s.Uk)("Decrypt Userdata")])),_:1}),(0,s.Wm)(k,{flat:"",round:"","no-caps":"",ripple:"",color:"grey-3",icon:"switch_account",onClick:e.logout},{default:(0,s.w5)((()=>[(0,s.Wm)(v,{anchor:"top middle",self:"bottom middle",offset:[10,15],delay:100,class:"bg-primary"},{default:(0,s.w5)((()=>[(0,s.Uk)(" Switch Account ")])),_:1})])),_:1},8,["onClick"])])),_:1}),(0,s._)("div",l,[(0,s.Wm)(D,{disable:"",readonly:"",outlined:"","lazy-rules":"",tabindex:"0",label:"Email",class:"q-mb-md",rules:[a=>e.checker.input(!!a||"",1e3)],modelValue:e.activeEmail,"onUpdate:modelValue":a[2]||(a[2]=a=>e.activeEmail=a)},{prepend:(0,s.w5)((()=>[(0,s.Wm)(w,{round:"",dense:"",flat:"",size:"xs",name:"email"})])),append:(0,s.w5)((()=>[(0,s.Wm)(w,{name:"lock",color:"primary"})])),_:1},8,["rules","modelValue"]),(0,s.Wm)(D,{outlined:"",autofocus:"","lazy-rules":"",autocomplete:"",tabindex:"1",class:"q-mb-md",ref:"passphrase",label:"Password",modelValue:e.passphrase,"onUpdate:modelValue":a[4]||(a[4]=a=>e.passphrase=a),rules:[a=>e.checker.input(!!a||"",1e3)],type:e.passfieldType,onFocus:a[5]||(a[5]=a=>e.passEye=!0),onBlur:a[6]||(a[6]=a=>e.passEye=!1)},{prepend:(0,s.w5)((()=>[(0,s.Wm)(w,{round:"",dense:"",flat:"",size:"xs",name:"lock"})])),append:(0,s.w5)((()=>[e.passphrase&&e.passEye?((0,s.wg)(),(0,s.j4)(k,{key:0,flat:"",round:"",dense:"",ripple:"",icon:"text"==e.passfieldType.toLowerCase()?"visibility_off":"visibility",onClick:e.togglePassview},null,8,["icon","onClick"])):(0,s.kq)("",!0),e.passphrase?((0,s.wg)(),(0,s.j4)(k,{key:1,flat:"",round:"",dense:"",ripple:"",icon:"clear",onClick:a[3]||(a[3]=a=>e.passphrase="")})):(0,s.kq)("",!0)])),_:1},8,["modelValue","rules","type"]),(0,s._)("div",n,[(0,s.Wm)(q),(0,s.Wm)(k,{ripple:"","no-caps":"",tabindex:"2",type:"submit",color:"primary",class:"q-px-lg",label:"Decrypt Data",loading:e.decrypting.status,percentage:e.decrypting.percentage},{loading:(0,s.w5)((()=>[(0,s.Wm)(x,{size:"xs",class:"on-left"}),(0,s.Uk)(" Decrypting ")])),_:1},8,["loading","percentage"])])])])),_:1},8,["onSubmit"])):((0,s.wg)(),(0,s.iD)("div",r,[(0,s.Wm)(c,{class:"bg-primary text-white"},{default:(0,s.w5)((()=>[(0,s.Wm)(u,{class:"text-weight-bold text-center"},{default:(0,s.w5)((()=>[(0,s.Uk)((0,i.zw)(e.$myvar.default.message),1)])),_:1})])),_:1}),(0,s.Wm)(h,{dense:"","narrow-indicator":"",modelValue:e.tab,"onUpdate:modelValue":a[0]||(a[0]=a=>e.tab=a),align:"justify",class:"text-grey-6","active-color":"primary","indicator-color":"primary"},{default:(0,s.w5)((()=>[(0,s.Wm)(m,{name:"login",label:"Login"}),(0,s.Wm)(m,{name:"register",label:"Register"})])),_:1},8,["modelValue"]),(0,s.Wm)(g),(0,s.Wm)(y,{modelValue:e.tab,"onUpdate:modelValue":a[1]||(a[1]=a=>e.tab=a),animated:""},{default:(0,s.w5)((()=>[(0,s.Wm)(b,{name:"login"},{default:(0,s.w5)((()=>[(0,s.Wm)(f,{tab:e.tab},null,8,["tab"])])),_:1}),(0,s.Wm)(b,{name:"register"},{default:(0,s.w5)((()=>[(0,s.Wm)(f,{tab:e.tab},null,8,["tab"])])),_:1})])),_:1},8,["modelValue"])]))])),_:1}))])),_:1})}t(5663);var p=t(1082),d=t(8825),u=t(6386),c=t(1959),m=t(741),h=t(3552);const g=(0,s.aZ)({name:"PageAuth",mixins:[h.ii],components:{"login-register":t(3905).Z},data(){return{$q:(0,d.Z)(),checker:u.BF,tab:(0,c.iH)("login"),passEye:(0,c.iH)(!1),passphrase:(0,c.iH)(null),activeEmail:(0,c.iH)(null),passfieldType:(0,c.iH)("password"),decrypting:(0,c.iH)({status:!1,percentage:0}),interval:(0,c.iH)(null)}},beforeMount(){if(Object.keys(this.userDetails).length&&(this.userDetails.passphrase&&this.reRouter(),this.userDetails.email&&(this.activeEmail=this.userDetails.email),this.userDetails.account&&this.userDetails.account.lastRefreshAt&&!this.userDetails.passphrase&&this.userDetails.email)){const e=p.ZP.getDateDiff(new Date,new Date(Math.abs(this.userDetails.account.lastLoginAt)),"hours");e>3&&(this.logout(),(0,u.qz)("Session has expired, please re-authenticate!","warning",1e4))}},computed:{...(0,m.rn)("firebase_auth",["userDetails"])},watch:{userDetails:{handler(e){Object.keys(e).length&&(this.activeEmail=e.email)},deep:!0}},methods:{...(0,m.nv)("firebase_auth",["decryptTest"]),async submitPassphrase(){this.decrypting.status=!0;const e=this.$q.localStorage.getItem("userDetails");await this.decryptTest({userDetails:e,passphrase:u.US.encode(this.passphrase)}).then((e=>{e.success?(this.decrypting.status=!1,this.reRouter()):this.interval=setInterval((()=>{this.decrypting.percentage+=Math.floor(8*Math.random()+10),this.decrypting.percentage>=100&&(this.decrypting.status=!1,(0,u.qz)("Decryption failed!","warning"),clearInterval(this.interval))}),500)})).catch((()=>{(0,u.qz)("Decryption failed!","negative")}))},reRouter(){(0,u.qz)("Decrypting user data...","ongoing",500,null,{color:"primary"}),window.history.state.back&&window.history.state.back!=this.$myvar.router.auth.url?this.$router.back():this.$router.push(this.$myvar.router.default.afterLogin.url)},togglePassview(){this.passfieldType="text"==this.passfieldType.toLowerCase()?"password":"text",setTimeout((()=>{"text"==this.passfieldType.toLowerCase()&&(this.passfieldType="password")}),3e3)}},beforeUnmount(){this.interval&&clearInterval(this.interval)}});var f=t(4260),b=t(4379),y=t(151),w=t(9570),v=t(3747),k=t(7547),D=t(3269),q=t(5869),x=t(5906),_=t(6602),W=t(5269),Z=t(4554),C=t(8240),T=t(8870),V=t(4842),z=t(2025),I=t(8719),Q=t(7518),U=t.n(Q);const L=(0,f.Z)(g,[["render",o]]),E=L;U()(g,"components",{QPage:b.Z,QCard:y.Z,QToolbar:w.Z,QToolbarTitle:v.Z,QTabs:k.Z,QTab:D.Z,QSeparator:q.Z,QTabPanels:x.Z,QTabPanel:_.Z,QForm:W.Z,QIcon:Z.Z,QBtn:C.Z,QTooltip:T.Z,QInput:V.Z,QSpace:z.Z,QSpinnerFacebook:I.Z})}}]);