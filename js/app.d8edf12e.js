(()=>{var e={2870:(e,s,t)=>{"use strict";t(5363),t(71);var r=t(8880),a=t(9592),o=t(3673);function i(e,s,t,r,a,i){const n=(0,o.up)("router-view");return(0,o.wg)(),(0,o.j4)(n,{onMousemove:e.testIdle},{default:(0,o.w5)((({Component:e})=>[((0,o.wg)(),(0,o.j4)((0,o.LL)(e)))])),_:1},8,["onMousemove"])}var n=t(6395),c=t(8825),u=t(741),d=t(6386),l=t(3552),f=t(3369),p=t.n(f);const h=(0,o.aZ)({name:"App",mixins:[l.ii],data(){return{$q:(0,c.Z)(),idle:!1,idle_expire:1e4}},computed:{...(0,u.rn)("firebase_auth",["userDetails"]),isLogin(){return!!n.Z.has(this.$myvar.localStorage.userDetails)}},created(){d.c0.console(),this.handleAuthStateChanged(),this.idle=p()((async()=>{this.isLogin&&await this.firebaseUpdateUser({userId:this.userDetails.userId,updates:{online:!1}})}),{element:window,timeout:this.idle_expire,loop:!1})},methods:{...(0,u.nv)("firebase_auth",["handleAuthStateChanged","firebaseUpdateCurrentUser","firebaseUpdateUser"]),async testIdle(e){this.idle.idle&&this.isLogin&&(await this.firebaseUpdateUser({userId:this.userDetails.userId,updates:{online:!0}}),this.idle.reset())}},beforeMount(){const e=this.$q.localStorage.getItem(this.$myvar.localStorage.userDetails);e&&this.firebaseUpdateCurrentUser(e)},beforeUnmount(){this.idle.destroy()}});var m=t(4260);const y=(0,m.Z)(h,[["render",i]]),b=y;var g=t(614),v=t(3340),w=t(8339);const D=[{path:"/",component:()=>Promise.all([t.e(736),t.e(293)]).then(t.bind(t,1293)),children:[{path:"",component:()=>Promise.all([t.e(736),t.e(359)]).then(t.bind(t,6359))},{path:"/chat",component:()=>Promise.all([t.e(736),t.e(920)]).then(t.bind(t,7920))},{path:"/chat/:otherUserId",component:()=>Promise.all([t.e(736),t.e(920)]).then(t.bind(t,7920))},{path:"/budget",component:()=>Promise.all([t.e(736),t.e(954)]).then(t.bind(t,8954))},{path:"/diary",component:()=>Promise.all([t.e(736),t.e(121)]).then(t.bind(t,1121))}]},{path:"/:catchAll(.*)*",component:()=>Promise.all([t.e(736),t.e(393)]).then(t.bind(t,8393))}],U=D,I=(0,v.BC)((function(){const e=w.r5,s=(0,w.p7)({scrollBehavior:()=>({left:0,top:0}),routes:U,history:e("")});return s}));async function x(e,s){const r="function"===typeof g["default"]?await(0,g["default"])({}):g["default"],{storeKey:o}=await Promise.resolve().then(t.bind(t,614)),i="function"===typeof I?await I({store:r}):I;r.$router=i;const n=e(b);return n.use(a.Z,s),{app:n,store:r,storeKey:o,router:i}}var A=t(1791),_=t(4434);const S={config:{},plugins:{Dialog:A.Z,Notify:_.Z,LocalStorage:n.Z}},j="";async function T({app:e,router:s,store:t,storeKey:r},a){let o=!1;const i=e=>{try{return s.resolve(e).href}catch(t){}return Object(e)===e?null:e},n=e=>{if(o=!0,"string"===typeof e&&/^https?:\/\//.test(e))return void(window.location.href=e);const s=i(e);null!==s&&(window.location.href=s,window.location.reload())},c=window.location.href.replace(window.location.origin,"");for(let d=0;!1===o&&d<a.length;d++)try{await a[d]({app:e,router:s,store:t,ssrContext:null,redirect:n,urlPath:c,publicPath:j})}catch(u){return u&&u.url?void n(u.url):void console.error("[Quasar] boot error:",u)}!0!==o&&(e.use(s),e.use(t,r),e.mount("#q-app"))}x(r.ri,S).then((e=>Promise.all([Promise.resolve().then(t.bind(t,2490)),Promise.resolve().then(t.bind(t,5474)),Promise.resolve().then(t.bind(t,1313))]).then((s=>{const t=s.map((e=>e.default)).filter((e=>"function"===typeof e));T(e,t)}))))},6386:(e,s,t)=>{"use strict";t.d(s,{BF:()=>h,US:()=>d,c0:()=>n,it:()=>y,qz:()=>l});t(5363);var r=t(4244),a=t(4434),o=t(2490);function i(){console.log("%c"+o.myvar["default"].message,"color: grey; font-family:system-ui; font-size: 3rem; font-weight: bold"),console.log("%c"+o.myvar["default"].bug,"color: silver; font-size: 1.5em; text-weight: bold;")}const n={console:i};function c(e){try{return r.lW.from(e,"utf-8").toString("base64")}catch(s){console.error("Base64 Encode: ",s.message)}}function u(e){try{return r.lW.from(e,"base64").toString("utf-8")}catch(s){console.error("Base64 Decode: ",s.message)}}const d={encode:c,decode:u};function l(e,s,t=1e3,r=null,o={}){let i={progress:!0,message:e,timeout:t||1e3};s&&(i.type=s),r&&(i.position=r),o&&Object.keys(o).length&&Object.keys(o).forEach((e=>{i[e]=o[e]})),a.Z.create(i)}function f(e){return"[object Object]"===Object.prototype.toString.call(e)}function p(e,s=1e3){return new Promise(((t,r)=>{setTimeout((()=>{if(f(e))if(e.type&&e.value)switch(e.type.toLowerCase()){case"email":t(m.email.test(String(e.value).toLowerCase())||"Invalid Email Address");break;case"password":t(m.password.test(String(e.value).toLowerCase())||"Password is Weak");break;default:t(!1,"");break}else t(!1,"");t(e)}),s)}))}const h={type:{isObject:f},input:p},m={email:/^(?:[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*|"(?:[\x01-\x08\x0b\x0c\x0e-\x1f\x21\x23-\x5b\x5d-\x7f]|\\[\x01-\x09\x0b\x0c\x0e-\x7f])*")@(?:(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?|\[(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?|[a-z0-9-]*[a-z0-9]:(?:[\x01-\x08\x0b\x0c\x0e-\x1f\x21-\x5a\x53-\x7f]|\\[\x01-\x09\x0b\x0c\x0e-\x7f])+)\])$/,password:/^((?=(.*\d){1,})(?=(.*[!@#$%^&*()\-__+.]){1,})(?=(.*[a-zA-Z]){3,})).{9,}$/};function y(e){let s;s=e.replace(/</gim,"&lt;");const t=/(\b(https?|ftps?):\/\/[-A-Z0-9+&@#\/%?=~_|!:,.;]*[-A-Z0-9+&@#\/%=~_|])/gim;s=s.replace(t,'<a href="$1" target="_blank">$1</a>');const r=/(^|[^\/])(www\.[\S]+(\b|$))/gim;return s=s.replace(r,'$1<a href="http://$2" target="_blank">$2</a>'),s}},5474:(e,s,t)=>{"use strict";t.r(s),t.d(s,{axios:()=>o.a,default:()=>n,random_word:()=>i});var r=t(3340),a=t(52),o=t.n(a);const i=o().create({baseURL:"https://random-word-api.herokuapp.com/word"}),n=(0,r.xr)((({app:e})=>{e.config.globalProperties.$axios=o()}))},2490:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>p,firebaseApp:()=>u,firebaseAuth:()=>d,firebaseDb:()=>l,myvar:()=>f});var r=t(3340),a=t(5720),o=t(8127),i=t(1654),n=t(1959),c={apiKey:"AIzaSyCm_MVIcvUSjCkAyX4OrqacY7B75nImGRM",authDomain:"personalv01.firebaseapp.com",projectId:"personalv01",storageBucket:"personalv01.appspot.com",messagingSenderId:"697787484725",appId:"1:697787484725:web:b8e5bf709113ee5078ff7c"};const u=(0,a.ZF)(c),d=(0,i.v0)(u),l=(0,o.ad)(u);let f=(0,n.qj)({localStorage:{userDetails:"userDetails"},default:{message:"Hello, friend.",bug:"\nA bug is never just a mistake.\nIt represents something bigger.\nAn error of thinking.\nThat makes you who you are.\n    ",out_message:"Goodbye, friend!"},router:{default:{},auth:{url:"/",title:"Hello, friend.",tooltip:"Auth"},chat:{url:"/chat",title:"Private Chat",tooltip:"Chat"},budget:{url:"/budget",title:"Accounting",tooltip:"Budget"},diary:{url:"/diary",title:"Life Events",tooltip:"Diary"}},messages:{type:{text:"text",encrypted:"encrypted",autodelete:"autodelete",encrypted_autodelete:"encrypted_autodelete"},lastEvent:null,todelete:[]},audio:{notification:new Audio("notification.mp3")}});f.router.default.afterLogin=f.router.chat;const p=(0,r.xr)((({app:e})=>{e.config.globalProperties.$myvar=f}))},1313:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>u,openpgp:()=>a,openpgp_methods:()=>c});t(71);var r=t(3340),a=t(8599);async function o(e={passphrase:null,userIds:null,type:"ecc",curve:"ed25519",format:"armored"}){let s={};try{await a.generateKey({type:e.type,userIDs:e.userIds,curve:e.curve,passphrase:e.passphrase,format:e.format}).then((e=>{s={success:!0,response:e}})).catch((e=>{s={success:!1,response:e}}))}catch(error){s={success:!1,response:error}}return s}async function i(e={publicKeysArmored:null,privateKeyArmored:null,passphrase:null,plainText:null}){let s={};try{const t=await Promise.all(e.publicKeysArmored.map((e=>a.readKey({armoredKey:e})))),r=e.privateKeyArmored?await a.decryptKey({privateKey:await a.readPrivateKey({armoredKey:e.privateKeyArmored}),passphrase:e.passphrase}):null;let o={message:await a.createMessage({text:e.plainText}),encryptionKeys:t};r&&(o.signingKeys=r);const i=await a.encrypt(o);s={success:!0,response:i}}catch(error){s={success:!1,response:error}}return s}async function n(e={privateKeyArmored:null,publicKeyArmored:null,passphrase:null,encryptedText:null}){let s={};try{const t=e.publicKeyArmored?await a.readKey({armoredKey:e.publicKeyArmored}):null,r=await a.decryptKey({privateKey:await a.readPrivateKey({armoredKey:e.privateKeyArmored}),passphrase:e.passphrase}),o=await a.readMessage({armoredMessage:e.encryptedText});let i={message:o,decryptionKeys:r};t&&(i.verificationKeys=t,i.expectSigned=!0);const{data:n,signatures:c}=await a.decrypt(i);try{e.publicKeyArmored&&await c[0].verified,s={success:!0,response:n}}catch(error){s={success:!1,response:error}}}catch(t){s={success:!1,response:error}}return s}const c={generate:o,encrypt_string:i,decrypt_string:n},u=(0,r.xr)((({app:e})=>{e.config.globalProperties.$openpgp=a,e.config.globalProperties.$openpgp_methods=c}))},3552:(e,s,t)=>{"use strict";t.d(s,{ii:()=>l,y7:()=>u,k0:()=>a,aY:()=>i,E1:()=>f});var r=t(741);const a={computed:{...(0,r.Se)("firebase_auth",["users"]),...(0,r.rn)("firebase_auth",["userDetails"]),otherUserId(){return this.$route.params.otherUserId},otherUserDetails(){let e={};return this.users[this.otherUserId]?e={...this.users[this.otherUserId],userId:this.otherUserId}:this.isSelfChat&&(e={...this.$store.state.firebase_auth.users[this.otherUserId],userId:this.otherUserId}),e},isSelfChat(){let e=!1;if(!this.otherUserId||this.otherUserDetails&&Object.keys(this.otherUserDetails).length||!this.$store.state.firebase_auth.users[this.otherUserId]||!Object.keys(this.$store.state.firebase_auth.users[this.otherUserId]).length||(e=!0),e){const s={...this.$store.state.firebase_auth.users[this.otherUserId],userId:this.otherUserId};this.userDetails.userId!==s.userId&&(e=!1)}return e}}};var o=t(6386);const i={data(){return{preloader:!0,watchPreload:null}},methods:{startPreloading(e,s=5e3,t=!0){t&&(this.watchPreload=e),setTimeout((()=>{this.preloader&&(this.preloader=!1)}),s)}},watch:{watchPreload:{handler(e){if(e){o.BF.type.isObject(e)?Object.keys(e).length:e&&e.length;setTimeout((()=>{this.preloader=!1}),1500)}},deep:!0}}};var n=t(1634),c=t(1082);const u={methods:{relativeDate(e){return 0==c.ZP.getDateDiff(new Date,new Date(e),"years")?c.ZP.getDateDiff(new Date,new Date(e),"hours")>12?c.ZP.formatDate(e,"MMMM D")+" at "+c.ZP.formatDate(e,"h:mm A"):(0,n.Z)(e,new Date,{addSuffix:!0}):c.ZP.formatDate(e,"MMMM D, YYYY")}}};t(5663);var d=t(2490);const l={methods:{...(0,r.nv)("firebase_auth",["logoutUser"]),async logout(){(0,o.qz)(d.myvar["default"].out_message,"ongoing",1e3,"center",{color:"primary"}),await this.logoutUser().then((e=>{e.success||(0,o.qz)("Logout error!","warning")})).catch((()=>{(0,o.qz)("Unknown error!","negative")})),this.$router.push("/")}}},f={data(){return{timer:null,secondsTimer:0}},created(){this.timer=setInterval((()=>{this.secondsTimer+=1}),1e3)},computed:{minuteTimer(){return Math.round(this.secondsTimer/60)}},methods:{cancelAutoUpdate(){clearInterval(this.timer)}},beforeUnmount(){this.cancelAutoUpdate()}}},3493:(e,s,t)=>{"use strict";t.d(s,{s:()=>r});const r={users:"users",chats:"chats",personal:"personal",personals:{diary:"diary",budget:"transactions",notifications:"notifications",pgpkeys:"pgpkeys"},notifications:{messages:"messages"}}},8747:()=>{},614:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>us});var r={};t.r(r),t.d(r,{users:()=>U,visibleUsers:()=>I});var a={};t.r(a),t.d(a,{addUser:()=>A,clearUser:()=>j,removeUser:()=>S,setUserDetails:()=>x,updateCurrentUser:()=>T,updateUser:()=>_});var o={};t.r(o),t.d(o,{decryptTest:()=>Z,firebaseDeleteUser:()=>Q,firebaseGetUsers:()=>G,firebaseSendEmailVerification:()=>Y,firebaseSendPasswordResetEmail:()=>H,firebaseStopGettingUsers:()=>F,firebaseUpdateCurrentUser:()=>X,firebaseUpdateEmail:()=>V,firebaseUpdatePassword:()=>R,firebaseUpdateProfile:()=>W,firebaseUpdateUser:()=>B,handleAuthStateChanged:()=>z,initializeUserData:()=>L,loginUser:()=>q,logoutUser:()=>J,registerUser:()=>$,stopAllProcessOnLogout:()=>ee});var i={};t.r(i),t.d(i,{groupedMessages:()=>re});var n={};t.r(n),t.d(n,{addMessage:()=>ae,clearMessages:()=>ne,removeMessage:()=>ie,updateMessage:()=>oe});var c={};t.r(c),t.d(c,{firebaseClearChats:()=>pe,firebaseDeleteMessage:()=>fe,firebaseGetMessages:()=>ue,firebaseSendMessage:()=>le,firebaseStopGettingMessages:()=>de});var u={};t.r(u),t.d(u,{addPushDiary:()=>ge,addUnshiftDiary:()=>be,clearDiary:()=>De,removeDiary:()=>ve,updateDiary:()=>we});var d={};t.r(d),t.d(d,{firebaseAddDiary:()=>Ae,firebaseClearDiary:()=>je,firebaseDeleteDiary:()=>Se,firebaseGetAllDiary:()=>Ie,firebaseStopGettingDiary:()=>xe,firebaseUpdateDiary:()=>_e});var l={};t.r(l),t.d(l,{transactionsCredit:()=>Pe,transactionsDebit:()=>Oe,walletBalance:()=>ke});var f={};t.r(f),t.d(f,{addPushTransactions:()=>Ce,addUnshiftTransactions:()=>Ke,clearTransactions:()=>$e,removeTransaction:()=>Me,updateTransaction:()=>Ne});var p={};t.r(p),t.d(p,{firebaseAddTransaction:()=>Ze,firebaseClearTransactions:()=>Fe,firebaseDeleteTransaction:()=>Ge,firebaseGetAllTransactions:()=>Je,firebaseStopGettingTransactions:()=>Le,firebaseUpdateTransaction:()=>ze});var h={};t.r(h),t.d(h,{notifMessages:()=>Ye});var m={};t.r(m),t.d(m,{addNotifications:()=>He,clearNotifications:()=>We,removeNotifications:()=>Re,removeNotificationsData:()=>Ve,updateNotifications:()=>Qe});var y={};t.r(y),t.d(y,{addNotification:()=>as,alertNotification:()=>ts,deleteNotification:()=>os,deleteNotificationData:()=>is,firebaseGetNotifications:()=>ss,firebaseStopGettingNotifications:()=>ns,updateNotification:()=>rs});var b=t(3340),g=t(741),v=t(1959);function w(){return{userDetails:(0,v.qj)({}),users:(0,v.qj)({})}}var D=t(6386);function U(e){let s=(0,v.qj)({});return Object.keys(e.users).filter((s=>s!==e.userDetails.userId)).forEach((t=>{s[t]||(s[t]={}),D.BF.type.isObject(e.users[t])&&Object.keys(e.users[t]).filter((e=>"pgp"!==e)).forEach((r=>{s[t][r]=e.users[t][r]})),D.BF.type.isObject(e.users[t]["pgp"])&&(s[t]["pgp"]={publicKey:e.users[t]["pgp"].publicKey?e.users[t]["pgp"].publicKey:null})})),s}function I(e,s){let t=(0,v.qj)({});return Object.keys(s.users).forEach((e=>{D.BF.type.isObject(s.users[e])&&(s.users[e]["invisible"]||(t[e]=s.users[e]))})),t}function x(e,s){e.userDetails=s}function A(e,s){e.users[s.userId]=s.userDetails}function _(e,s){Object.assign(e.users[s.userId],s.userDetails)}function S(e,s){delete e.users[s.userId]}function j(e){e.users=(0,v.qj)({})}function T(e,s){Object.keys(s).forEach((t=>{e.userDetails[t]=s[t]}))}t(5663);var E=t(2490),k=t(1313),O=t(1654),P=t(8127),K=t(3493),C=t(6395);let M,N;async function $({dispatch:e},s){let t={};return await(0,O.Xb)(E.firebaseAuth,s.email,s.password).then((async()=>{N=D.US.encode(s.password),e("firebaseUpdateProfile",{displayName:s.name}),e("firebaseSendEmailVerification");const r=E.firebaseAuth.currentUser.uid;await k.openpgp_methods.generate({passphrase:s.password,userIds:[{name:s.name,email:s.email,invitation:s.invite}],type:"ecc",curve:"ed25519",format:"armored"}).then((async a=>{a.success?await(0,P.pl)((0,P.JU)(E.firebaseDb,K.s.users,r),{name:s.name,email:s.email,online:!0,invisible:!1,invitation_code:s.invite,pgp:{privateKey:D.US.encode(a.response.privateKey),publicKey:D.US.encode(a.response.publicKey),revocationCertificate:D.US.encode(a.response.revocationCertificate)}}).then((()=>{t={success:!0}})).catch((async s=>{await e("firebaseDeleteUser"),e("logoutUser"),t={success:!1,response:s}})):(await e("firebaseDeleteUser"),e("logoutUser"),t={success:!1,response:"Failed tot Generate PGP Keys"})})).catch((e=>{t={success:!1,response:e}}))})).catch((e=>{t={success:!1,response:e}})),t}async function q({},e){let s={};return await(0,O.e5)(E.firebaseAuth,e.email,e.password).then((()=>{N=D.US.encode(e.password),s={success:!0}})).catch((e=>{s={success:!1,response:e}})),s}async function J({state:e,commit:s,dispatch:t}){let r={};try{const a=e.userDetails.userId;await t("firebaseUpdateUser",{userId:a,updates:{online:!1}}).then((async e=>{r=e.success?{success:!0,response:e}:{success:!1,response:e},await t("stopAllProcessOnLogout"),C.Z.has(E.myvar.localStorage.userDetails)&&C.Z.remove(E.myvar.localStorage.userDetails),E.firebaseAuth&&await(0,O.w7)(E.firebaseAuth),s("setUserDetails",{}),console.clear(),D.c0.console()})).catch((e=>{r={success:!1,response:e}}))}catch(error){r={success:!1,response:error}}return r}async function L({dispatch:e}){let s={};try{e("firebaseGetUsers"),s={success:!0}}catch(error){s={success:!1,response:error}}return s}async function Z({commit:e,dispatch:s},t){let r={};try{const a=C.Z.getItem(E.myvar.localStorage.userDetails);a?await k.openpgp_methods.encrypt_string({publicKeysArmored:[D.US.decode(a.pgp.publicKey)],privateKeyArmored:D.US.decode(a.pgp.privateKey),passphrase:D.US.decode(t.passphrase),plainText:E.myvar["default"].bug}).then((async o=>{o.success?await k.openpgp_methods.decrypt_string({privateKeyArmored:D.US.decode(a.pgp.privateKey),publicKeyArmored:D.US.decode(a.pgp.publicKey),passphrase:D.US.decode(t.passphrase),encryptedText:o.response}).then((async a=>{a.success&&a.response===E.myvar["default"].bug?(await e("updateCurrentUser",{...t.userDetails,passphrase:t.passphrase}),await s("initializeUserData").then((e=>{r=e.success?{success:!0}:{success:!1,response:e}})).catch((e=>{r={success:!1,response:e}}))):r={success:!1,response:a}})).catch((e=>{r={success:!1,response:e}})):r={success:!1,response:"Failed to Encrypt"}})).catch((e=>{r={success:!1,response:e}})):r={success:!1,response:"No Userdetails"}}catch(error){r={success:!1,response:error}}return r}function z({dispatch:e}){try{(0,O.Aj)(E.firebaseAuth,(async s=>{try{if(s){const t=E.firebaseAuth.currentUser.uid;let r=await(0,P.QT)((0,P.JU)(E.firebaseDb,K.s.users,t));if(r.exists()){const a={...r.data(),account:s.reloadUserInfo,userId:t};a.account&&a.account.passwordHash&&delete a.account.passwordHash,e("firebaseUpdateUser",{userId:a.userId,updates:{online:!0}}),C.Z.set(E.myvar.localStorage.userDetails,a),N?(e("decryptTest",{userDetails:a,passphrase:N}),window.history.state.back&&window.history.state.back!=E.myvar.router.auth.url?this.$router.back():this.$router.push(E.myvar.router["default"].afterLogin.url)):this.$router.push(E.myvar.router.auth.url)}}else C.Z.has(E.myvar.localStorage.userDetails)||await e("logoutUser"),this.$router.push("/")}catch(error){console.error("Auth Failure: ",error)}}))}catch(error){console.error("Auth Error: ",error)}}function G({state:e,commit:s}){try{const t=(0,P.IO)((0,P.hJ)(E.firebaseDb,K.s.users));M=(0,P.cf)(t,(t=>{try{t.docChanges().forEach((t=>{const r=t.doc.data(),a=t.doc.id;"added"===t.type&&s("addUser",{userId:a,userDetails:r}),"modified"===t.type&&(s("updateUser",{userId:a,userDetails:r}),a===e.userDetails.userId&&s("updateCurrentUser",{...r,userId:a})),"removed"===t.type&&s("removeUser",{userId:a,userDetails:r})}))}catch(error){console.error("Users Failure: ",error)}}))}catch(error){console.error("Users Error: ",error)}}function F({commit:e}){M&&(M(),e("clearUser"))}async function B({},e){let s={};try{e.userId?await(0,P.r7)((0,P.JU)(E.firebaseDb,K.s.users,e.userId),e.updates).then((()=>{s={success:!0}})).catch((e=>{s={success:!1,response:e}})):s={success:!1,response:void 0}}catch(error){s={success:!1,response:error}}return s}function X({commit:e},s){e("updateCurrentUser",s)}async function Y({}){let e={};try{await(0,O.w$)(E.firebaseAuth.currentUser).then((()=>{e={success:!0}})).catch((s=>{e={success:!1,response:s}}))}catch(error){e={success:!1,response:error}}return e}async function H({},e){let s={};try{await(0,O.LS)(E.firebaseAuth,e).then((()=>{s={success:!0}})).catch((e=>{s={success:!1,response:e}}))}catch(error){s={success:!1,response:error}}return s}async function Q({}){let e={};try{await(0,O.h8)(E.firebaseAuth.currentUser).then((()=>{e={success:!0}})).catch((s=>{e={success:!1,response:s}}))}catch(error){e={success:!1,response:error}}return e}async function R({},e){let s={};try{await(0,O.gQ)(E.firebaseAuth.currentUser,e).then((()=>{s={success:!0}})).catch((e=>{s={success:!1,response:e}}))}catch(error){s={success:!1,response:error}}return s}async function V({},e){let s={};try{await(0,O.s)(E.firebaseAuth.currentUser,e).then((()=>{s={success:!0}})).catch((e=>{s={success:!1,response:e}}))}catch(error){s={success:!1,response:error}}return s}async function W({},e){let s={};try{await(0,O.ck)(E.firebaseAuth.currentUser,e).then((()=>{s={success:!1,response:error}})).catch((e=>{s={success:!1,response:e}}))}catch(error){s={success:!1,response:error}}return s}async function ee({dispatch:e}){await e("firebase_notification/firebaseStopGettingNotifications",null,{root:!0}),await e("firebase_chat/firebaseStopGettingMessages",null,{root:!0}),await e("firebase_budget/firebaseStopGettingTransactions",null,{root:!0}),await e("firebase_diary/firebaseStopGettingDiary",null,{root:!0}),await e("firebaseStopGettingUsers")}const se={namespaced:!0,state:w,getters:r,mutations:a,actions:o};function te(){return{messages:(0,v.qj)({})}}function re(e){let s=null,t=-1,r=[];return Object.keys(e.messages).forEach(((a,o)=>{const i=e.messages[a];if(i.from==s)r[t].push({id:a,data:i}),i.text.length>=50&&(r[t][0].size="8");else{t++,s=i.from;const e=i.text.length>=50?"8":"";r.push([{id:a,data:i,size:e}])}})),r}function ae(e,s){e.messages[s.messageId]=s.messageDetails}function oe(e,s){Object.assign(e.messages[s.messageId],s.messageDetails)}function ie(e,s){delete e.messages[s.messageId]}function ne(e){e.messages=(0,v.qj)({})}let ce;function ue({state:e,commit:s},t){try{const r=this.state.firebase_auth.userDetails.userId,a=(0,P.IO)((0,P.hJ)(E.firebaseDb,K.s.chats,r,t.otherUserId),(0,P.Xo)("timestamp"));ce=(0,P.cf)(a,(t=>{try{t.docChanges().forEach((t=>{const r=t.doc.data(),a=t.doc.id;"added"===t.type&&(E.myvar.messages.lastEvent="added",e.messages[a]||s("addMessage",{messageId:a,messageDetails:r})),"modified"===t.type&&(E.myvar.messages.lastEvent="modified",s("updateMessage",{messageId:a,messageDetails:r})),"removed"===t.type&&(E.myvar.messages.lastEvent="removed",s("removeMessage",{messageId:a,messageDetails:r}))}))}catch(error){console.error("Chat Failure: ",error)}}))}catch(error){console.error("Chat Error: ",error)}}async function de({commit:e}){let s={};try{ce&&(await ce(),await e("clearMessages"),E.myvar.messages.lastEvent=null),s={success:!0}}catch(error){s={success:!1,response:error}}return s}async function le({dispatch:e},s){let t={};const r=this.state.firebase_auth.userDetails.userId;return await(0,P.ET)((0,P.hJ)(E.firebaseDb,K.s.chats,r,s.otherUserId),s.message,{merge:!0}).then((async a=>{s.message.from="them",await(0,P.pl)((0,P.JU)(E.firebaseDb,K.s.chats,s.otherUserId,r,a.id),s.message,{merge:!0}).then((async()=>{e("firebase_notification/addNotification",{notifUser:s.otherUserId,notifId:r,notifType:K.s.notifications.messages,notifDetails:{id:a.id,timestamp:s.message.timestamp,type:s.message.type}},{root:!0}),t={success:!0}})).catch((e=>{t={success:!1,response:e}}))})).catch((e=>{t={success:!1,response:e}})),t}async function fe({},e){let s={};const t=this.state.firebase_auth.userDetails.userId;return await(0,P.oe)((0,P.JU)(E.firebaseDb,K.s.chats,t,e.otherUserId,e.messageId)).then((async()=>{e.deleteForEveryone?await(0,P.oe)((0,P.JU)(E.firebaseDb,K.s.chats,e.otherUserId,t,e.messageId)).then((()=>{s={success:!0}})).catch((e=>{s={success:!1,response:e}})):s={success:!0}})).catch((e=>{s={success:!1,response:e}})),s}async function pe({dispatch:e},s){let t={};try{const r=this.state.firebase_auth.userDetails.userId,a=(0,P.IO)((0,P.hJ)(E.firebaseDb,K.s.chats,r,s),(0,P.Xo)("timestamp"));await(0,P.PL)(a).then((a=>{let o=0;a.forEach((async t=>{await e("firebaseDeleteMessage",{otherUserId:s,messageId:t.id}).then((e=>{e.success||o++})).catch((()=>{o++}))})),e("firebase_notification/deleteNotificationData",{notifUser:r,notifId:s,notifType:K.s.notifications.messages,deleteKey:!0},{root:!0}),t=0===o?{success:!0,response:a}:{success:!1,response:{errorCount:o,querySnapshot:a}}})).catch((e=>{t={success:!1,response:e}}))}catch(error){t={success:!1,response:error}}return t}const he={namespaced:!0,state:te,getters:i,mutations:n,actions:c};function me(){return{diary:(0,v.qj)([])}}var ye=t(8747);t(2031);function be(e,s){e.diary.unshift(s)}function ge(e,s){e.diary.push(s)}function ve(e,s){const t=e.diary.findIndex((e=>e.id==s.id));t>=0&&e.diary.splice(t,1)}function we(e,s){const t=e.diary.findIndex((e=>e.id==s.id));t>=0&&Object.assign(e.diary[t],s)}function De(e){e.diary=(0,v.qj)([])}let Ue;function Ie({state:e,commit:s}){try{const t=this.state.firebase_auth.userDetails.userId,r=(0,P.IO)((0,P.hJ)(E.firebaseDb,K.s.personal,t,K.s.personals.diary),(0,P.Xo)("timestamp"));Ue=(0,P.cf)(r,(t=>{try{t.docChanges().forEach((t=>{const r=t.doc.data(),a=t.doc.id;if("added"===t.type){let t=e.diary.findIndex((e=>e.id==a));t<0&&s("addUnshiftDiary",{id:a,...r})}"modified"===t.type&&s("updateDiary",{id:a,...r}),"removed"===t.type&&s("removeDiary",{id:a,...r})}))}catch(error){console.error("Diary Failure: ",error)}}))}catch(error){console.error("Diary Error: ",error)}}function xe({commit:e}){Ue&&(Ue(),e("clearDiary"))}async function Ae({},e){let s={};const t=this.state.firebase_auth.userDetails.userId;return await(0,P.ET)((0,P.hJ)(E.firebaseDb,K.s.personal,t,K.s.personals.diary),e,{merge:!0}).then((()=>{s={success:!0}})).catch((e=>{s={success:!1,response:e}})),s}async function _e({},e){let s={};if(e.id){const t=this.state.firebase_auth.userDetails.userId;await(0,P.r7)((0,P.JU)(E.firebaseDb,K.s.personal,t,K.s.personals.diary,e.id),e.updates).then((()=>{s={success:!0}})).catch((e=>{s={success:!1,response:e}}))}else s={success:!1,response:void 0};return s}async function Se({},e){let s={};const t=this.state.firebase_auth.userDetails.userId;return await(0,P.oe)((0,P.JU)(E.firebaseDb,K.s.personal,t,K.s.personals.diary,e.id)).then((()=>{s={success:!0}})).catch((e=>{s={success:!1,response:e}})),s}async function je({dispatch:e}){const s=this.state.firebase_auth.userDetails.userId,t=(0,P.IO)((0,P.hJ)(E.firebaseDb,K.s.personal,s,K.s.personals.diary),(0,P.Xo)("timestamp")),r=await(0,P.PL)(t);r.forEach((s=>{e("firebaseDeleteDiary",{id:s.id})}))}const Te={namespaced:!0,state:me,getters:ye,mutations:u,actions:d};function Ee(){return{transactions:(0,v.qj)([])}}function ke(e,s){return s.transactionsDebit.sum-s.transactionsCredit.sum}function Oe(e){let s=0;const t=e.transactions.filter((e=>"debit"===e.type));return t.forEach((e=>{s+=e.money})),{sum:s,data:t}}function Pe(e){let s=0;const t=e.transactions.filter((e=>"credit"===e.type));return t.forEach((e=>{s+=e.money})),{sum:s,data:t}}function Ke(e,s){e.transactions.unshift(s)}function Ce(e,s){e.transactions.push(s)}function Me(e,s){const t=e.transactions.findIndex((e=>e.id==s.id));t>=0&&e.transactions.splice(t,1)}function Ne(e,s){const t=e.transactions.findIndex((e=>e.id==s.id));t>=0&&Object.assign(e.transactions[t],s)}function $e(e){e.transactions=(0,v.qj)([])}let qe;function Je({state:e,commit:s}){try{const t=this.state.firebase_auth.userDetails.userId,r=(0,P.IO)((0,P.hJ)(E.firebaseDb,K.s.personal,t,K.s.personals.budget),(0,P.Xo)("timestamp"));qe=(0,P.cf)(r,(t=>{try{t.docChanges().forEach((t=>{const r=t.doc.data(),a=t.doc.id;if("added"===t.type){let t=e.transactions.findIndex((e=>e.id==a));t<0&&s("addUnshiftTransactions",{id:a,...r})}"modified"===t.type&&s("updateTransaction",{id:a,...r}),"removed"===t.type&&s("removeTransaction",{id:a})}))}catch(error){console.error("Transaction Failure: ",error)}}))}catch(error){console.error("Transaction Error: ",error)}}function Le({commit:e}){qe&&(qe(),e("clearTransactions"))}async function Ze({},e){let s={};const t=this.state.firebase_auth.userDetails.userId;return await(0,P.ET)((0,P.hJ)(E.firebaseDb,K.s.personal,t,K.s.personals.budget),e,{merge:!0}).then((()=>{s={success:!0}})).catch((e=>{s={success:!1,response:e}})),s}async function ze({},e){let s={};if(e.id){const t=this.state.firebase_auth.userDetails.userId;await(0,P.r7)((0,P.JU)(E.firebaseDb,K.s.personal,t,K.s.personals.budget,e.id),e.updates).then((()=>{s={success:!0}})).catch((e=>{s={success:!1,response:e}}))}else s={success:!1};return s}async function Ge({},e){let s={};const t=this.state.firebase_auth.userDetails.userId;return await(0,P.oe)((0,P.JU)(E.firebaseDb,K.s.personal,t,K.s.personals.budget,e.id)).then((()=>{s={success:!0}})).catch((e=>{s={success:!1,response:e}})),s}async function Fe({dispatch:e}){const s=this.state.firebase_auth.userDetails.userId,t=(0,P.IO)((0,P.hJ)(E.firebaseDb,K.s.personal,s,K.s.personals.budget),(0,P.Xo)("timestamp")),r=await(0,P.PL)(t);r.forEach((s=>{e("firebaseDeleteTransaction",{id:s.id})}))}const Be={namespaced:!0,state:Ee,getters:l,mutations:f,actions:p};function Xe(){return{notifications:(0,v.qj)({})}}function Ye(e){const s=K.s.notifications.messages;return e.notifications&&e.notifications[s]?e.notifications[s]:[]}function He(e,s){e.notifications[s.notifId]=s.details}function Qe(e,s){e.notifications[s.notifId]?(e.notifications[s.notifId]&&Object.keys(e.notifications[s.notifId]).length&&Object.keys(e.notifications[s.notifId]).forEach((t=>{s.details[t]||delete e.notifications[s.notifId][t]})),s.details&&Object.keys(s.details).length&&Object.keys(s.details).forEach((t=>{e.notifications[s.notifId][t]=s.details[t]}))):e.notifications[s.notifId]=s.details}function Re(e,s){delete e.notifications[s.notifId]}function Ve(e,s){e.notifications[s.notifId].forEach(((t,r)=>{Object.is(t,details)&&e.notifications[s.notifId].splice(r,0)}))}function We(e){e.notifications=(0,v.qj)({})}let es;function ss({commit:e,dispatch:s,getters:t},r){try{const a=this.state.firebase_auth.userDetails.userId,o=(0,P.IO)((0,P.hJ)(E.firebaseDb,K.s.personal,a,K.s.personals.notifications));es=(0,P.cf)(o,(a=>{try{a.docChanges().forEach((a=>{let o=a.doc.data();const i=a.doc.id;"added"===a.type&&(Object.keys(o).forEach((e=>{switch(i){case K.s.notifications.messages:(o[e]&&o[e].length&&!t.notifMessages[e]||o[e]&&o[e].length&&o[e].length>t.notifMessages[e].length)&&s("alertNotification",r?r.audio:null);break;default:break}})),e("addNotifications",{notifId:i,details:o})),"modified"===a.type&&(Object.keys(o).forEach((e=>{switch(i){case K.s.notifications.messages:(o[e]&&o[e].length&&!t.notifMessages[e]||o[e]&&o[e].length&&o[e].length>t.notifMessages[e].length)&&s("alertNotification",r?r.audio:null);break;default:break}})),e("updateNotifications",{notifId:i,details:o})),"removed"===a.type&&e("removeNotifications",{notifId:i,details:o})}))}catch(error){console.error("Notification Failure: ",error)}}))}catch(error){console.error("Notification Error: ",error)}}function ts({},e){let s={};try{const t=e||E.myvar.audio.notification;t.play(),s={success:!0}}catch(error){s={success:!1,response:error}}return s}async function rs({},e){let s={};try{await(0,P.pl)((0,P.JU)(E.firebaseDb,K.s.personal,e.notifUser,K.s.personals.notifications,e.notifType),e.notifUpdates,{merge:!0}).then((()=>{s={success:!0}})).catch((e=>{s={success:!1,response:e}}))}catch(error){s={success:!1,response:error}}return s}async function as({},e){let s={};try{await(0,P.pl)((0,P.JU)(E.firebaseDb,K.s.personal,e.notifUser,K.s.personals.notifications,e.notifType),{[e.notifId]:(0,P.vr)(e.notifDetails)},{merge:!0}).then((()=>{s={success:!0}})).catch((e=>{s={success:!1,response:e}}))}catch(error){s={success:!1,response:error}}return s}async function os({},e){let s={};try{await(0,P.oe)((0,P.JU)(E.firebaseDb,K.s.personal,e.notifUser,K.s.personals.notifications,e.notifType)).then((()=>{s={success:!0}})).catch((e=>{s={success:!1,response:e}}))}catch(error){s={success:!1,response:error}}return s}async function is({},e){let s={};try{await(0,P.r7)((0,P.JU)(E.firebaseDb,K.s.personal,e.notifUser,K.s.personals.notifications,e.notifType),{[e.notifId]:e.deleteKey?(0,P.AK)():(0,P.Ab)(e.notifDetails)}).then((()=>{s={success:!0}})).catch((e=>{s={success:!1,response:e}}))}catch(error){s={success:!1,response:error}}return s}async function ns({commit:e}){let s={};try{es&&(await es(),await e("clearNotifications")),s={success:!0}}catch(error){s={success:!1,response:error}}return s}const cs={namespaced:!0,state:Xe,getters:h,mutations:m,actions:y},us=(0,b.h)((function(){const e=(0,g.MT)({modules:{firebase_auth:se,firebase_chat:he,firebase_diary:Te,firebase_budget:Be,firebase_notification:cs},strict:!1});return e}))}},s={};function t(r){var a=s[r];if(void 0!==a)return a.exports;var o=s[r]={exports:{}};return e[r].call(o.exports,o,o.exports,t),o.exports}t.m=e,(()=>{var e=[];t.O=(s,r,a,o)=>{if(!r){var i=1/0;for(d=0;d<e.length;d++){for(var[r,a,o]=e[d],n=!0,c=0;c<r.length;c++)(!1&o||i>=o)&&Object.keys(t.O).every((e=>t.O[e](r[c])))?r.splice(c--,1):(n=!1,o<i&&(i=o));if(n){e.splice(d--,1);var u=a();void 0!==u&&(s=u)}}return s}o=o||0;for(var d=e.length;d>0&&e[d-1][2]>o;d--)e[d]=e[d-1];e[d]=[r,a,o]}})(),(()=>{t.n=e=>{var s=e&&e.__esModule?()=>e["default"]:()=>e;return t.d(s,{a:s}),s}})(),(()=>{t.d=(e,s)=>{for(var r in s)t.o(s,r)&&!t.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:s[r]})}})(),(()=>{t.f={},t.e=e=>Promise.all(Object.keys(t.f).reduce(((s,r)=>(t.f[r](e,s),s)),[]))})(),(()=>{t.u=e=>"js/"+e+"."+{121:"0fa09143",293:"d3eac747",359:"8e5c15e0",393:"5a9d9785",920:"f7272459",954:"88b1eff7"}[e]+".js"})(),(()=>{t.miniCssF=e=>"css/"+({143:"app",736:"vendor"}[e]||e)+"."+{121:"fba1372d",143:"650d262e",293:"9b9ad710",359:"ffd3f68f",736:"48017362",920:"b38da368",954:"b983d06e"}[e]+".css"})(),(()=>{t.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()})(),(()=>{t.o=(e,s)=>Object.prototype.hasOwnProperty.call(e,s)})(),(()=>{var e={},s="personal:";t.l=(r,a,o,i)=>{if(e[r])e[r].push(a);else{var n,c;if(void 0!==o)for(var u=document.getElementsByTagName("script"),d=0;d<u.length;d++){var l=u[d];if(l.getAttribute("src")==r||l.getAttribute("data-webpack")==s+o){n=l;break}}n||(c=!0,n=document.createElement("script"),n.charset="utf-8",n.timeout=120,t.nc&&n.setAttribute("nonce",t.nc),n.setAttribute("data-webpack",s+o),n.src=r),e[r]=[a];var f=(s,t)=>{n.onerror=n.onload=null,clearTimeout(p);var a=e[r];if(delete e[r],n.parentNode&&n.parentNode.removeChild(n),a&&a.forEach((e=>e(t))),s)return s(t)},p=setTimeout(f.bind(null,void 0,{type:"timeout",target:n}),12e4);n.onerror=f.bind(null,n.onerror),n.onload=f.bind(null,n.onload),c&&document.head.appendChild(n)}}})(),(()=>{t.r=e=>{"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}})(),(()=>{t.p=""})(),(()=>{var e=(e,s,t,r)=>{var a=document.createElement("link");a.rel="stylesheet",a.type="text/css";var o=o=>{if(a.onerror=a.onload=null,"load"===o.type)t();else{var i=o&&("load"===o.type?"missing":o.type),n=o&&o.target&&o.target.href||s,c=new Error("Loading CSS chunk "+e+" failed.\n("+n+")");c.code="CSS_CHUNK_LOAD_FAILED",c.type=i,c.request=n,a.parentNode.removeChild(a),r(c)}};return a.onerror=a.onload=o,a.href=s,document.head.appendChild(a),a},s=(e,s)=>{for(var t=document.getElementsByTagName("link"),r=0;r<t.length;r++){var a=t[r],o=a.getAttribute("data-href")||a.getAttribute("href");if("stylesheet"===a.rel&&(o===e||o===s))return a}var i=document.getElementsByTagName("style");for(r=0;r<i.length;r++){a=i[r],o=a.getAttribute("data-href");if(o===e||o===s)return a}},r=r=>new Promise(((a,o)=>{var i=t.miniCssF(r),n=t.p+i;if(s(i,n))return a();e(r,n,a,o)})),a={143:0};t.f.miniCss=(e,s)=>{var t={121:1,293:1,359:1,920:1,954:1};a[e]?s.push(a[e]):0!==a[e]&&t[e]&&s.push(a[e]=r(e).then((()=>{a[e]=0}),(s=>{throw delete a[e],s})))}})(),(()=>{var e={143:0};t.f.j=(s,r)=>{var a=t.o(e,s)?e[s]:void 0;if(0!==a)if(a)r.push(a[2]);else{var o=new Promise(((t,r)=>a=e[s]=[t,r]));r.push(a[2]=o);var i=t.p+t.u(s),n=new Error,c=r=>{if(t.o(e,s)&&(a=e[s],0!==a&&(e[s]=void 0),a)){var o=r&&("load"===r.type?"missing":r.type),i=r&&r.target&&r.target.src;n.message="Loading chunk "+s+" failed.\n("+o+": "+i+")",n.name="ChunkLoadError",n.type=o,n.request=i,a[1](n)}};t.l(i,c,"chunk-"+s,s)}},t.O.j=s=>0===e[s];var s=(s,r)=>{var a,o,[i,n,c]=r,u=0;if(i.some((s=>0!==e[s]))){for(a in n)t.o(n,a)&&(t.m[a]=n[a]);if(c)var d=c(t)}for(s&&s(r);u<i.length;u++)o=i[u],t.o(e,o)&&e[o]&&e[o][0](),e[o]=0;return t.O(d)},r=globalThis["webpackChunkpersonal"]=globalThis["webpackChunkpersonal"]||[];r.forEach(s.bind(null,0)),r.push=s.bind(null,r.push.bind(r))})();var r=t.O(void 0,[736],(()=>t(2870)));r=t.O(r)})();